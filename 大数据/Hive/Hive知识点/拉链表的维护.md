# 拉链表

https://blog.csdn.net/shufangreal/article/details/109748803

## 1. 什么是拉链表

### 1.1 拉链表

1. 维护历史状态，以及最新状态数据的一种表，拉链表根据拉链粒度的不同，实际上相当于快照，只不过做了优化，去除了一部分不变的记录，通过拉链表可以很方便的还原出拉链时点的客户记录。



### 1.2 拉链表的作用场景

1. 数据流比较大
2. 表中的部分字段会被更新，常见的如用户信息，订单状态等。
3. 表中的数据变化的比例以及频率都不是很大，每次(每天)只更新少数记录，如总共用户1亿，每天新增和发生改变的只有20万左右。
4. 需求包含需要查看某一个时间点或者时间段的历史快照信息，空间存储有限，避免每天全量存储。



### 1.3 拉链表实例方案

1. 加入有一个用户表存储了1亿条记录，50列，这样的数据流在hive中维护，空间会占用不少， 而且HDFS默认备份3份，空间的占用就更突出了。现在这个表中的部分记录某些字段每天都会被业务端产出update操作。这种场景就是表中的数据变化比例和频率都不大，那么对于这种情况的同步数据方案如下：
   1. 每日全量覆盖：操作简单，最省空间，但不支持保留历史数据。
   2. 每日全量切片：操作简单，可以保留历史数据，但是存储了大量每改变的冗余数据，造成磁盘空间被大量占用
   3. 拉链表：技能保留历史数据， 也优化了冗余存储。保证每条记录的生命周期都可查询。